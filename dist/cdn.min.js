var Leaf=(function(h){"use strict";let y=[];function S(t){t.deps&&(t.deps.forEach(n=>{n.delete(t)}),t.deps.clear())}function p(t){const n=()=>{S(n),y.push(n),t(),y.pop()};return n.deps=new Set,n(),()=>S(n)}function M(t){let n=t;const e=new Set;return[()=>{const s=y[y.length-1];return s&&(e.add(s),s.deps.add(e)),n},s=>{if(Object.is(n,s))return;n=s,new Set(e).forEach(i=>i())}]}const k={},w={};function N(t,n){k[t]=n({$stores:w})}function V(t,n){return w[t]||(w[t]=n()),w[t]}function b(t,n,e){const r=[];return e.forEach(o=>{const s=o(t,n,b,e);typeof s=="function"&&r.push(s)}),Array.from(t.children).forEach(o=>{const s=b(o,n,e);s&&r.push(s)}),()=>r.forEach(o=>o())}function f(t,n){const e=n.split(".");let r=t;for(const o of e)if(r=r[o],r===void 0)return;return r}function C(t){return t.charAt(0).toUpperCase()+t.slice(1)}function q(t,n){function e(o){if(o==="true")return!0;if(o==="false")return!1;if(o==="null")return null;if(o!=="undefined")return!isNaN(o)&&o.trim()!==""?Number(o):o}return t.map(o=>{const s=f(n,o);return s!==void 0?typeof s=="function"?s():s:e(o)})}function x(t=[],n){t.includes("prevent")&&n.preventDefault(),t.includes("stop")&&n.stopPropagation()}function T(t,n){const e=t.dataset.text;return e?p(()=>{const o=f(n,e);t.textContent=typeof o=="function"?o():o}):void 0}const E=new WeakMap;function g(t,n){let e=E.get(t);if(!e)return;const r=e[n];r&&(t.removeEventListener(n,r),delete e[n],Object.keys(e).length===0&&E.delete(t))}function A(t,n,e){let r=E.get(t);r||(r={},E.set(t,r)),g(t,n),t.addEventListener(n,e),r[n]=e}function P(t,n){const e=t.dataset.on;if(!e)return;const[r,o]=e.split(":").map(d=>d.trim()),s=r.split("."),a=s[0],i=s.slice(1),l=t.dataset.param?t.dataset.param.split(",").map(d=>d.trim()):[];return A(t,a,d=>{if(x(i,d),!o)return;const c=f(n,o);if(typeof c=="function"){const m=q(l,n);c(...m,d)}else console.error(`[Listener] ${o} must be a function`)}),()=>g(t,a)}function I(t,n){const e=t.dataset.if;if(!e)return;const r=t.parentNode,o=document.createComment("if");r.insertBefore(o,t),r.removeChild(t);const s=p(()=>{const a=f(n,e);(typeof a=="function"?a():a)?t.isConnected||r.insertBefore(t,o):t.isConnected&&r.removeChild(t)});return()=>{s(),o.isConnected&&o.remove()}}function O(t,n,e,r){const o=[],s=t.querySelector("template");if(!s)return;const a=t.dataset.for;if(!a)return;let i=[];const l=p(()=>{const u=f(n,a),d=typeof u=="function"?u():u||[];i.forEach(c=>c()),i=[],Array.from(t.childNodes).forEach(c=>{c!==s&&c.remove()}),d.forEach((c,m)=>{const L=s.content.cloneNode(!0),F=Array.from(L.children),H={...n,$item:c,$index:m};F.forEach(J=>{const D=e(J,H,r);typeof D=="function"&&i.push(D)}),t.appendChild(L)})});return o.push(()=>{l(),i.forEach(u=>u()),i=[]}),()=>o.forEach(u=>u())}function j(t,n){if(t.type==="checkbox"){Array.isArray(n)?t.checked=n.includes(t.value):t.checked=!!n;return}if(t.type==="radio"){t.checked=n===t.value;return}t.value=n??""}function B(t,n){return t.type==="checkbox"?Array.isArray(n())?t.checked?[...n(),t.value]:n().filter(e=>e!==t.value):t.checked:t.type==="radio"?t.checked?t.value:n():t.value}function W(t,n){const e=t.dataset.model;if(!e)return;const r=f(n,e),o=f(n,"set"+C(e));if(typeof r!="function"||typeof o!="function")throw new Error(`[model] "${e}" requires signal "${e}()" and setter "set${C(e)}()"`);const s=p(()=>{j(t,r())}),a=l=>{o(B(t,r))},i=t.tagName==="TEXTAREA"||t.tagName==="INPUT"&&!["checkbox","radio"].includes(t.type);return A(t,i?"input":"change",a),()=>{s(),g(t,i?"input":"change")}}function Y(t,n){const e=t.dataset.init;if(!e)return;const r=f(n,e);if(typeof r=="function")r();else throw new Error(`[init] ${e} must be a function`)}function U(t,n){const e=t.dataset.bind;if(!e||!e.includes(":"))return;const[r,o]=e.split(":").map(i=>i.trim()),s=f(n,o);if(typeof s!="function")throw new Error(`[bind] ${o} is not a signal`);return p(()=>{const i=s();i==null?t.removeAttribute(r):i===!0?t.setAttribute(r,""):i===!1?t.removeAttribute(r):t.setAttribute(r,i)})}function z(t,n){t.hasAttribute("data-init-hide")&&(t.removeAttribute("data-init-hide"),t.style.display="none");const e=t.dataset.show;if(!e)return;const r=f(n,e);if(typeof r!="function")throw new Error(`[show] ${e} must be a function`);const o=t.hasAttribute("data-animate"),s=t.dataset.animate||"opacity 0.5s ease, transform 0.5s ease";let a=!1;const i=()=>{r()||(t.style.display="none",a=!1)};o&&(t.style.transition=s,A(t,"transitionend",i));const l=p(()=>{if(!o){t.style.display=r()?"":"none";return}r()?(t.style.display="",t.style.opacity="0",t.style.transform="translateY(-10px)",requestAnimationFrame(()=>{t.style.opacity="1",t.style.transform="translateY(0)"})):a||(a=!0,t.style.opacity="0",t.style.transform="translateY(-10px)",t.style.transition=s)});return()=>{l(),o&&g(t,"transitionend")}}function G(t,n){const e=[],r=t.dataset.class;return r?(r.split(",").forEach(s=>{if(!s.trim())return;const[a,...i]=s.split(":");if(a){if(i.length===0)throw new Error("[class] a class is required for adding class")}else throw new Error("[class] a function is required for adding class");const u=i.join(":").trim().replace(/^['"]|['"]$/g,""),d=p(()=>{const c=f(n,a.trim());if(typeof c=="function")u.split(/\s+/).forEach(m=>{m&&t.classList.toggle(m,c())});else throw new Error(`[class] ${a} must be a function`)});e.push(d)}),()=>e.forEach(s=>s())):void 0}const R=[T,P,I,O,W,Y,U,z,G],v=new WeakMap;function $(){document.querySelectorAll("[data-scope]").forEach(t=>{const n=k[t.dataset.scope];if(!n)throw new Error(`Scope ${t.dataset.scope} is not defined`);const e=v.get(t);e&&e.forEach(s=>s());const r=[],o=b(t,n,R);typeof o=="function"&&r.push(o),v.set(t,r)})}function X(t){const n=v.get(t);n&&(n.forEach(e=>e()),v.delete(t))}return typeof document<"u"&&document.addEventListener("DOMContentLoaded",$),h.defineScope=N,h.defineStore=V,h.effect=p,h.mount=$,h.signal=M,h.unmount=X,h})({});
