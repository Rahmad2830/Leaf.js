(function(){"use strict";let d=null;function v(t){t.deps&&(t.deps.forEach(n=>{n.delete(t)}),t.deps.clear())}function l(t){const n=()=>{v(n),d=n,t(),d=null};return n.deps=new Set,n(),()=>v(n)}function q(t){let n=t;const o=new Set;return[()=>(d&&(o.add(d),d.deps.add(o)),n),r=>{n=r,new Set(o).forEach(u=>u())}]}const w={};function A(t,n){w[t]=n()}function a(t,n){const o=n.split(".");let e=t;for(const s of o)if(e=e[s],e===void 0)return;return e}function C(t){return t.charAt(0).toUpperCase()+t.slice(1)}function S(t,n){const o=[];return t.querySelectorAll("[data-text]").forEach(e=>{const s=e.dataset.text,r=l(()=>{const c=a(n,s);e.textContent=typeof c=="function"?c():c});o.push(r)}),()=>o.forEach(e=>e())}function D(t,n){function o(s){if(s==="true")return!0;if(s==="false")return!1;if(s==="null")return null;if(s!=="undefined")return!isNaN(s)&&s.trim()!==""?Number(s):s}return t.map(s=>{const r=a(n,s);return r!==void 0?typeof r=="function"?r():r:o(s)})}function x(t=[],n){t.includes("prevent")&&n.preventDefault(),t.includes("stop")&&n.stopPropagation()}const h=new WeakMap;function N(t,n){let o=h.get(t);if(!o)return;const e=o[n];e&&(t.removeEventListener(n,e),delete o[n],Object.keys(o).length===0&&h.delete(t))}function E(t,n,o){let e=h.get(t);e||(e={},h.set(t,e)),N(t,n),t.addEventListener(n,o),e[n]=o}function L(t,n){return t.querySelectorAll("[data-on]").forEach(o=>{const[e,s]=o.dataset.on.split(":"),r=e.split("."),c=r[0],u=r.slice(1),m=o.dataset.param?o.dataset.param.split(",").map(f=>f.trim()):[];E(o,c,f=>{if(x(u,f),!s)return;const p=a(n,s);if(typeof p=="function"){const y=D(m,n);p(...y,f)}})}),null}function I(t,n){const o=[];return t.querySelectorAll("[data-if]").forEach(e=>{const s=e.dataset.if,r=l(()=>{a(n,s)()?e.style.display="":e.style.display="none"});o.push(r)}),()=>o.forEach(e=>e())}function b(t,n){const o=[],e=S(t,n);return o.push(e),L(t,n),()=>o.forEach(s=>s())}function k(t,n){const o=[];return t.querySelectorAll("[data-for]").forEach(e=>{const s=e.querySelector("template"),r=e.dataset.for;let c=[];const u=l(()=>{const m=a(n,r)();c.forEach(i=>i()),c=[],Array.from(e.childNodes).forEach(i=>{i!==s&&i.remove()}),m.forEach((i,f)=>{const p=s.content.cloneNode(!0),y={...n,$item:i,$index:f},V=b(p,y);c.push(V),e.appendChild(p)})});o.push(u)}),()=>o.forEach(e=>e())}function O(t,n){const o=[];return t.querySelectorAll("[data-model]").forEach(e=>{const s=e.dataset.model,r=a(n,s),c=a(n,"set"+C(s)),u=l(()=>{const i=r();e.value!==i&&(e.value=i??"")});E(e,"input",i=>{typeof c=="function"&&c(i.target.value)}),o.push(u)}),()=>o.forEach(e=>e())}function P(t,n){const e=(t.querySelector("[data-init]")||t).dataset.init;if(e){const s=a(n,e);typeof s=="function"&&s()}return null}const W=[S,L,I,k,O,P],g=new WeakMap;function M(){document.querySelectorAll("[data-scope]").forEach(t=>{const n=w[t.dataset.scope];if(!n)return;const o=g.get(t);o&&o.forEach(s=>s());const e=[];W.forEach(s=>{const r=s(t,n);typeof r=="function"&&e.push(r)}),g.set(t,e)})}typeof document<"u"&&document.addEventListener("DOMContentLoaded",M),typeof window<"u"&&(window.signal=q,window.defineScope=A,window.mount=M)})();
