var Leaf=(function(p){"use strict";let y=[];function k(t){t.deps&&(t.deps.forEach(n=>{n.delete(t)}),t.deps.clear())}function l(t){const n=()=>{k(n),y.push(n),t(),y.pop()};return n.deps=new Set,n(),()=>k(n)}function N(t){let n=t;const o=new Set;return[()=>{const s=y[y.length-1];return s&&(o.add(s),s.deps.add(o)),n},s=>{if(Object.is(n,s))return;n=s,new Set(o).forEach(a=>a())}]}function V(t){let n,o=!0;const e=new Set,r=l(()=>{n=t(),o=!1});return{get value(){const s=y[y.length-1];return s&&(e.add(s),s.deps.add(e)),o&&r(),n}}}const q={},g={};function E(t,n){q[t]=n()}function x(t,n){return g[t]||(g[t]=store()),g[t]}function f(t,n){const o=n.split(".");let e=t;for(const r of o)if(e=e[r],e===void 0)return;return e}function L(t){return t.charAt(0).toUpperCase()+t.slice(1)}function D(t,n){const o=[];return t.querySelectorAll("[data-text]").forEach(e=>{const r=e.dataset.text;if(!r)return;const s=l(()=>{const i=f(n,r);e.textContent=typeof i=="function"?i():i});o.push(s)}),()=>o.forEach(e=>e())}function I(t,n){function o(r){if(r==="true")return!0;if(r==="false")return!1;if(r==="null")return null;if(r!=="undefined")return!isNaN(r)&&r.trim()!==""?Number(r):r}return t.map(r=>{const s=f(n,r);return s!==void 0?typeof s=="function"?s():s:o(r)})}function O(t=[],n){t.includes("prevent")&&n.preventDefault(),t.includes("stop")&&n.stopPropagation()}const v=new WeakMap;function S(t,n){let o=v.get(t);if(!o)return;const e=o[n];e&&(t.removeEventListener(n,e),delete o[n],Object.keys(o).length===0&&v.delete(t))}function m(t,n,o){let e=v.get(t);e||(e={},v.set(t,e)),S(t,n),t.addEventListener(n,o),e[n]=o}function $(t,n){const o=[];return t.querySelectorAll("[data-on]").forEach(e=>{const r=e.dataset.on;if(!r||!r.includes(":"))return;const[s,i]=r.split(":").map(d=>d.trim()),a=s.split("."),c=a[0],u=a.slice(1),h=e.dataset.param?e.dataset.param.split(",").map(d=>d.trim()):[];m(e,c,d=>{if(O(u,d),!i)return;const w=f(n,i);if(typeof w=="function"){const b=I(h,n);w(...b,d)}else throw new Error(`[Listener] ${i} must be a function`)}),o.push(()=>{S(e,c)})}),()=>o.forEach(e=>e())}function P(t,n){const o=[];return t.querySelectorAll("[data-if]").forEach(e=>{const r=e.dataset.if;if(!r)return;const s=e.parentNode,i=e.nextSibling,a=l(()=>{const c=f(n,r);(typeof c=="function"?c():c)?e.isConnected||s.insertBefore(e,i):e.isConnected&&s.removeChild(e)});o.push(a)}),()=>o.forEach(e=>e())}function W(t,n){const o=[],e=D(t,n);e&&o.push(e);const r=$(t,n);return r&&o.push(r),()=>o.forEach(s=>s())}function Y(t,n){const o=[];return t.querySelectorAll("[data-for]").forEach(e=>{const r=e.querySelector("template");if(!r)return;const s=e.dataset.for;if(!s)return;let i=[];const a=l(()=>{const c=f(n,s),u=typeof c=="function"?c():c||[];i.forEach(h=>h()),i=[],Array.from(e.childNodes).forEach(h=>{h!==r&&h.remove()}),u.forEach((h,M)=>{const d=r.content.cloneNode(!0),w=Array.from(d.children),b={...n,$item:h,$index:M};w.forEach(R=>{const X=W(R,b);i.push(X)}),e.appendChild(d)})});o.push(()=>{a(),i.forEach(c=>c()),i=[]})}),()=>o.forEach(e=>e())}function j(t,n){if(t.type==="checkbox"){Array.isArray(n)?t.checked=n.includes(t.value):t.checked=!!n;return}if(t.type==="radio"){t.checked=n===t.value;return}t.value=n??""}function B(t,n){return t.type==="checkbox"?Array.isArray(n())?t.checked?[...n(),t.value]:n().filter(o=>o!==t.value):t.checked:t.type==="radio"?t.checked?t.value:n():t.value}function z(t,n){const o=[];return t.querySelectorAll("[data-model]").forEach(e=>{const r=e.dataset.model;if(!r)return;const s=f(n,r),i=f(n,"set"+L(r));if(typeof s!="function"||typeof i!="function")throw new Error(`[model] "${r}" requires signal "${r}()" and setter "set${L(r)}()"`);const a=l(()=>{j(e,s())}),c=u=>{i(B(e,s))};m(e,"input",c),m(e,"change",c),o.push(()=>{a(),S(e,"input"),S(e,"change")})}),()=>o.forEach(e=>e())}function G(t,n){const e=(t.querySelector("[data-init]")||t).dataset.init;if(e){if(e){const r=f(n,e);if(typeof r=="function")r();else throw new Error(`[init] ${e} must be a function`)}return null}}function T(t,n){const o=[];return t.querySelectorAll("[data-bind]").forEach(e=>{const r=e.dataset.bind;if(!r||!r.includes(":"))return;const[s,i]=e.dataset.bind.split(":").map(u=>u.trim()),a=f(n,i);if(typeof a!="function")throw new Error(`[bind] ${i} is not a signal`);const c=l(()=>{const u=a();u==null?e.removeAttribute(s):u===!0?e.setAttribute(s,""):u===!1?e.removeAttribute(s):e.setAttribute(s,u)});o.push(c)}),()=>o.forEach(e=>e())}function U(t,n){t.style.display="",t.style.transition=n,t.style.opacity=0,t.style.transform="translateY(-10px)",requestAnimationFrame(()=>{t.style.opacity=1,t.style.transform="translateY(0)"}),m(t,"transitionend",()=>{t.style.transition="",t.style.opacity="",t.style.transform=""})}function H(t,n){t.style.transition=n,t.style.opacity=0,t.style.transform="translateY(-10px)",m(t,"transitionend",()=>{t.style.display="none",t.style.transition="",t.style.opacity="",t.style.transform=""})}function J(t,n){const o=[];return t.querySelectorAll("[data-show]").forEach(e=>{const r=e.dataset.show;if(!r)return;const s=e.hasAttribute("data-animate"),i=e.getAttribute("data-animate")||"opacity 0.3s ease, transform 0.3s ease",a=l(()=>{const c=f(n,r);if(typeof c!="function")throw new Error(`[show] ${r} must be a function`);s?c()?U(e,i):H(e,i):c()?e.style.display="":e.style.display="none"});o.push(a)}),()=>o.forEach(e=>e())}const K=[D,$,P,Y,z,G,T,J],A=new WeakMap;function C(){document.querySelectorAll("[data-scope]").forEach(t=>{const n=q[t.dataset.scope];if(!n)throw new Error(`Scope ${t.dataset.scope} is not defined`);const o=A.get(t);o&&o.forEach(r=>r());const e=[];K.forEach(r=>{try{const s=r(t,n);typeof s=="function"&&e.push(s)}catch(s){console.error(`[Directive error] ${r.name}`,s,t)}}),A.set(t,e)})}function Q(t){const n=A.get(t);n&&(n.forEach(o=>o()),A.delete(t))}return typeof document<"u"&&document.addEventListener("DOMContentLoaded",C),p.computed=V,p.defineScope=E,p.defineStore=x,p.effect=l,p.mount=C,p.signal=N,p.unmount=Q,p})({});
