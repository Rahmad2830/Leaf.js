var Leaf=(function(h){"use strict";let y=[];function q(e){e.deps&&(e.deps.forEach(n=>{n.delete(e)}),e.deps.clear())}function l(e){const n=()=>{q(n),y.push(n),e(),y.pop()};return n.deps=new Set,n(),()=>q(n)}function x(e){let n=e;const s=new Set;return[()=>{const o=y[y.length-1];return o&&(s.add(o),o.deps.add(s)),n},o=>{if(Object.is(n,o))return;n=o,new Set(s).forEach(c=>c())}]}const D={},m={};function I(e,n){D[e]=n({$stores:m})}function O(e,n){return m[e]||(m[e]=n()),m[e]}function f(e,n){const s=n.split(".");let t=e;for(const r of s)if(t=t[r],t===void 0)return;return t}function L(e){return e.charAt(0).toUpperCase()+e.slice(1)}function $(e,n){const s=[];return e.querySelectorAll("[data-text]").forEach(t=>{const r=t.dataset.text;if(!r)return;const o=l(()=>{const i=f(n,r);t.textContent=typeof i=="function"?i():i});s.push(o)}),()=>s.forEach(t=>t())}function P(e,n){function s(r){if(r==="true")return!0;if(r==="false")return!1;if(r==="null")return null;if(r!=="undefined")return!isNaN(r)&&r.trim()!==""?Number(r):r}return e.map(r=>{const o=f(n,r);return o!==void 0?typeof o=="function"?o():o:s(r)})}function j(e=[],n){e.includes("prevent")&&n.preventDefault(),e.includes("stop")&&n.stopPropagation()}const v=new WeakMap;function S(e,n){let s=v.get(e);if(!s)return;const t=s[n];t&&(e.removeEventListener(n,t),delete s[n],Object.keys(s).length===0&&v.delete(e))}function A(e,n,s){let t=v.get(e);t||(t={},v.set(e,t)),S(e,n),e.addEventListener(n,s),t[n]=s}function k(e,n){const s=[];return e.querySelectorAll("[data-on]").forEach(t=>{const r=t.dataset.on;if(!r||!r.includes(":"))return;const[o,i]=r.split(":").map(p=>p.trim()),c=o.split("."),a=c[0],u=c.slice(1),d=t.dataset.param?t.dataset.param.split(",").map(p=>p.trim()):[];A(t,a,p=>{if(j(u,p),!i)return;const b=f(n,i);if(typeof b=="function"){const w=P(d,n);b(...w,p)}else throw new Error(`[Listener] ${i} must be a function`)}),s.push(()=>{S(t,a)})}),()=>s.forEach(t=>t())}function W(e,n){const s=[];return e.querySelectorAll("[data-if]").forEach(t=>{const r=t.dataset.if;if(!r)return;const o=t.parentNode,i=t.nextSibling,c=l(()=>{const a=f(n,r);(typeof a=="function"?a():a)?t.isConnected||o.insertBefore(t,i):t.isConnected&&o.removeChild(t)});s.push(c)}),()=>s.forEach(t=>t())}function C(e,n){const s=[];return e.querySelectorAll("[data-show]").forEach(t=>{t.hasAttribute("data-init-hide")&&(t.removeAttribute("data-init-hide"),t.style.display="none");const r=t.dataset.show;if(!r)return;const o=t.hasAttribute("data-animate"),i=t.dataset.animate||"opacity 0.5s ease, transform 0.5s ease",c=l(()=>{const a=f(n,r);if(typeof a!="function")throw new Error(`[show] ${r} must be a function`);o?a()?(t.style.display="",t.style.opacity="0",t.style.transform="translateY(-10px)",requestAnimationFrame(()=>{t.style.opacity="1",t.style.transform="translateY(0)"})):(t.style.opacity="0",t.style.transform="translateY(-10px)",t.style.transition=i,A(t,"transitionend",()=>{a()||(t.style.display="none")})):a()?t.style.display="":t.style.display="none"});s.push(c)}),()=>s.forEach(t=>t())}function M(e,n){const s=[];return e.querySelectorAll("[data-bind]").forEach(t=>{const r=t.dataset.bind;if(!r||!r.includes(":"))return;const[o,i]=t.dataset.bind.split(":").map(u=>u.trim()),c=f(n,i);if(typeof c!="function")throw new Error(`[bind] ${i} is not a signal`);const a=l(()=>{const u=c();u==null?t.removeAttribute(o):u===!0?t.setAttribute(o,""):u===!1?t.removeAttribute(o):t.setAttribute(o,u)});s.push(a)}),()=>s.forEach(t=>t())}function Y(e,n){const s=[],t=$(e,n);t&&s.push(t);const r=k(e,n);r&&s.push(r);const o=C(e,n);o&&s.push(o);const i=M(e,n);return i&&s.push(i),()=>s.forEach(c=>c())}function B(e,n){const s=[];return e.querySelectorAll("[data-for]").forEach(t=>{const r=t.querySelector("template");if(!r)return;const o=t.dataset.for;if(!o)return;let i=[];const c=l(()=>{const a=f(n,o),u=typeof a=="function"?a():a||[];i.forEach(d=>d()),i=[],Array.from(t.childNodes).forEach(d=>{d!==r&&d.remove()}),u.forEach((d,V)=>{const p=r.content.cloneNode(!0),b=Array.from(p.children),w={...n,$item:d,$index:V};b.forEach(Q=>{const R=Y(Q,w);i.push(R)}),t.appendChild(p)})});s.push(()=>{c(),i.forEach(a=>a()),i=[]})}),()=>s.forEach(t=>t())}function z(e,n){if(e.type==="checkbox"){Array.isArray(n)?e.checked=n.includes(e.value):e.checked=!!n;return}if(e.type==="radio"){e.checked=n===e.value;return}e.value=n??""}function G(e,n){return e.type==="checkbox"?Array.isArray(n())?e.checked?[...n(),e.value]:n().filter(s=>s!==e.value):e.checked:e.type==="radio"?e.checked?e.value:n():e.value}function T(e,n){const s=[];return e.querySelectorAll("[data-model]").forEach(t=>{const r=t.dataset.model;if(!r)return;const o=f(n,r),i=f(n,"set"+L(r));if(typeof o!="function"||typeof i!="function")throw new Error(`[model] "${r}" requires signal "${r}()" and setter "set${L(r)}()"`);const c=l(()=>{z(t,o())}),a=u=>{i(G(t,o))};A(t,"input",a),A(t,"change",a),s.push(()=>{c(),S(t,"input"),S(t,"change")})}),()=>s.forEach(t=>t())}function U(e,n){const t=(e.querySelector("[data-init]")||e).dataset.init;if(t){if(t){const r=f(n,t);if(typeof r=="function")r();else throw new Error(`[init] ${t} must be a function`)}return null}}function H(e,n){const s=[];return e.querySelectorAll("[data-class]").forEach(t=>{const r=t.dataset.class.split(",");r&&r.forEach(o=>{if(!o.trim())return;const[i,...c]=o.split(":");if(i){if(c.length===0)throw new Error("[class] a class is required for adding class")}else throw new Error("[class] a function is required for adding class");const a=c.join(":"),u=l(()=>{const d=f(n,i.trim());if(typeof d=="function")t.classList.toggle(a,d());else throw new Error(`[class] ${i} must be a function`)});s.push(u)})}),()=>s.forEach(t=>t())}const J=[$,k,W,B,T,U,M,C,H],g=new WeakMap;function N(){document.querySelectorAll("[data-scope]").forEach(e=>{const n=D[e.dataset.scope];if(!n)throw new Error(`Scope ${e.dataset.scope} is not defined`);const s=g.get(e);s&&s.forEach(r=>r());const t=[];J.forEach(r=>{try{const o=r(e,n);typeof o=="function"&&t.push(o)}catch(o){console.error(`[Directive error] ${r.name}`,o,e)}}),g.set(e,t)})}function K(e){const n=g.get(e);n&&(n.forEach(s=>s()),g.delete(e))}return typeof document<"u"&&document.addEventListener("DOMContentLoaded",N),h.defineScope=I,h.defineStore=O,h.effect=l,h.mount=N,h.signal=x,h.unmount=K,h})({});
