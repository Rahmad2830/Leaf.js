(function(){"use strict";let d=null;function l(e){e.deps&&(e.deps.forEach(n=>{n.delete(e)}),e.deps.clear())}function f(e){const n=()=>{l(n),d=n,e(),d=null};return n.deps=new Set,n(),()=>l(n)}function w(e){let n=e;const t=new Set;return[()=>(d&&(t.add(d),d.deps.add(t)),n),a=>{n=a,new Set(t).forEach(s=>s(a))}]}const p={};function S(e,n){p[e]=n()}function i(e,n){const t=n.split(".");let o=e;for(const c of t)if(o=o[c],o===void 0)return;return o}function m(e){return e.charAt(0).toUpperCase()+e.slice(1)}const h=new WeakMap;function A(e,n){const t=[];return e.querySelectorAll("[data-text]").forEach(o=>{const c=o.dataset.text,a=i(n,c),r=f(()=>{o.textContent=typeof a=="function"?a():a});t.push(r)}),()=>t.forEach(o=>o())}function y(){document.querySelectorAll("[data-scope]").forEach(e=>{const n=p[e.dataset.scope];e.querySelectorAll("[data-text]").forEach(t=>{const o=t.dataset.text,c=i(n,o);f(()=>{t.textContent=c()})}),e.querySelectorAll("[data-on]").forEach(t=>{const o=t.dataset.on.split(":"),c=o[0],a=i(n,o[1]),r=()=>{typeof a=="function"&&a()};let s=h.get(t);s||(s={},h.set(t,s));const u=s[c];u&&t.removeEventListener(c,u),t.addEventListener(c,r),s[c]=r}),e.querySelectorAll("[data-if]").forEach(t=>{const o=t.dataset.if,c=i(n,o);f(()=>{c()?t.style.display="":t.style.display="none"})}),e.querySelectorAll("[data-for]").forEach(t=>{const o=t.querySelector("template"),c=t.dataset.for;let a=[];f(()=>{const r=i(n,c)();a.forEach(s=>s()),a=[],Array.from(t.childNodes).forEach(s=>{s!==o&&s.remove()}),r.forEach((s,u)=>{const v=o.content.cloneNode(!0),L={...n,$item:s,$index:u},q=A(v,L);a.push(q),t.appendChild(v)})})}),e.querySelectorAll("[data-model]").forEach(t=>{const o=t.dataset.model,c=i(n,o),a=i(n,"set"+m(o));f(()=>{const r=c();t.value!==r&&(t.value=r??"")}),t.addEventListener("input",r=>{a(r.target.value)})})})}typeof document<"u"&&document.addEventListener("DOMContentLoaded",y),typeof window<"u"&&(window.signal=w,window.defineScope=S,window.mount=y)})();
