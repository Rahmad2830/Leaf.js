(function(){"use strict";let d=null;function w(t){t.deps&&(t.deps.forEach(e=>{e.delete(t)}),t.deps.clear())}function l(t){const e=()=>{w(e),d=e,t(),d=null};return e.deps=new Set,e(),()=>w(e)}function q(t){let e=t;const o=new Set;return[()=>(d&&(o.add(d),d.deps.add(o)),e),r=>{e=r,new Set(o).forEach(u=>u())}]}const S={};function A(t,e){S[t]=e()}function a(t,e){const o=e.split(".");let n=t;for(const s of o)if(n=n[s],n===void 0)return;return n}function C(t){return t.charAt(0).toUpperCase()+t.slice(1)}function E(t,e){const o=[];return t.querySelectorAll("[data-text]").forEach(n=>{const s=n.dataset.text,r=l(()=>{const c=a(e,s);n.textContent=typeof c=="function"?c():c});o.push(r)}),()=>o.forEach(n=>n())}function D(t,e){function o(s){if(s==="true")return!0;if(s==="false")return!1;if(s==="null")return null;if(s!=="undefined")return!isNaN(s)&&s.trim()!==""?Number(s):s}return t.map(s=>{const r=a(e,s);return r!==void 0?typeof r=="function"?r():r:o(s)})}function x(t=[],e){t.includes("prevent")&&e.preventDefault(),t.includes("stop")&&e.stopPropagation()}const h=new WeakMap;function N(t,e){let o=h.get(t);if(!o)return;const n=o[e];n&&(t.removeEventListener(e,n),delete o[e],Object.keys(o).length===0&&h.delete(t))}function g(t,e,o){let n=h.get(t);n||(n={},h.set(t,n)),N(t,e),t.addEventListener(e,o),n[e]=o}function L(t,e){return t.querySelectorAll("[data-on]").forEach(o=>{const[n,s]=o.dataset.on.split(":"),r=n.split("."),c=r[0],u=r.slice(1),y=o.dataset.param?o.dataset.param.split(",").map(f=>f.trim()):[];g(o,c,f=>{if(x(u,f),!s)return;const p=a(e,s);if(typeof p=="function"){const v=D(y,e);p(...v,f)}})}),null}function I(t,e){const o=[];return t.querySelectorAll("[data-if]").forEach(n=>{const s=n.dataset.if,r=l(()=>{a(e,s)()?n.style.display="":n.style.display="none"});o.push(r)}),()=>o.forEach(n=>n())}function b(t,e){const o=[],n=E(t,e);return o.push(n),L(t,e),()=>o.forEach(s=>s())}function k(t,e){const o=[];return t.querySelectorAll("[data-for]").forEach(n=>{const s=n.querySelector("template"),r=n.dataset.for;let c=[];const u=l(()=>{const y=a(e,r)();c.forEach(i=>i()),c=[],Array.from(n.childNodes).forEach(i=>{i!==s&&i.remove()}),y.forEach((i,f)=>{const p=s.content.cloneNode(!0),v={...e,$item:i,$index:f},$=b(p,v);c.push($),n.appendChild(p)})});o.push(u)}),()=>o.forEach(n=>n())}function O(t,e){const o=[];return t.querySelectorAll("[data-model]").forEach(n=>{const s=n.dataset.model,r=a(e,s),c=a(e,"set"+C(s)),u=l(()=>{const i=r();n.value!==i&&(n.value=i??"")});g(n,"input",i=>{typeof c=="function"&&c(i.target.value)}),o.push(u)}),()=>o.forEach(n=>n())}function P(t,e){const n=(t.querySelector("[data-init]")||t).dataset.init;if(n){const s=a(e,n);typeof s=="function"&&s()}return null}const W=[E,L,I,k,O,P],m=new WeakMap;function M(){document.querySelectorAll("[data-scope]").forEach(t=>{const e=S[t.dataset.scope];if(!e)return;const o=m.get(t);o&&o.forEach(s=>s());const n=[];W.forEach(s=>{const r=s(t,e);typeof r=="function"&&n.push(r)}),m.set(t,n)})}function V(t){const e=m.get(t);e&&(e.forEach(o=>o()),m.delete(t))}typeof document<"u"&&document.addEventListener("DOMContentLoaded",M),typeof window<"u"&&(window.signal=q,window.defineScope=A,window.mount=M,window.mount=V)})();
