var Leaf=(function(l){"use strict";let y=[];function q(e){e.deps&&(e.deps.forEach(n=>{n.delete(e)}),e.deps.clear())}function h(e){const n=()=>{q(n),y.push(n),e(),y.pop()};return n.deps=new Set,n(),()=>q(n)}function N(e){let n=e;const o=new Set;return[()=>{const s=y[y.length-1];return s&&(o.add(s),s.deps.add(o)),n},s=>{if(Object.is(n,s))return;n=s,new Set(o).forEach(c=>c())}]}const L={},m={};function V(e,n){L[e]=n({$stores:m})}function x(e,n){return m[e]||(m[e]=n()),m[e]}function f(e,n){const o=n.split(".");let t=e;for(const r of o)if(t=t[r],t===void 0)return;return t}function $(e){return e.charAt(0).toUpperCase()+e.slice(1)}function D(e,n){const o=[];return e.querySelectorAll("[data-text]").forEach(t=>{const r=t.dataset.text;if(!r)return;const s=h(()=>{const i=f(n,r);t.textContent=typeof i=="function"?i():i});o.push(s)}),()=>o.forEach(t=>t())}function I(e,n){function o(r){if(r==="true")return!0;if(r==="false")return!1;if(r==="null")return null;if(r!=="undefined")return!isNaN(r)&&r.trim()!==""?Number(r):r}return e.map(r=>{const s=f(n,r);return s!==void 0?typeof s=="function"?s():s:o(r)})}function O(e=[],n){e.includes("prevent")&&n.preventDefault(),e.includes("stop")&&n.stopPropagation()}const v=new WeakMap;function S(e,n){let o=v.get(e);if(!o)return;const t=o[n];t&&(e.removeEventListener(n,t),delete o[n],Object.keys(o).length===0&&v.delete(e))}function A(e,n,o){let t=v.get(e);t||(t={},v.set(e,t)),S(e,n),e.addEventListener(n,o),t[n]=o}function C(e,n){const o=[];return e.querySelectorAll("[data-on]").forEach(t=>{const r=t.dataset.on;if(!r||!r.includes(":"))return;const[s,i]=r.split(":").map(d=>d.trim()),c=s.split("."),a=c[0],u=c.slice(1),p=t.dataset.param?t.dataset.param.split(",").map(d=>d.trim()):[];A(t,a,d=>{if(O(u,d),!i)return;const g=f(n,i);if(typeof g=="function"){const k=I(p,n);g(...k,d)}else throw new Error(`[Listener] ${i} must be a function`)}),o.push(()=>{S(t,a)})}),()=>o.forEach(t=>t())}function P(e,n){const o=[];return e.querySelectorAll("[data-if]").forEach(t=>{const r=t.dataset.if;if(!r)return;const s=t.parentNode,i=t.nextSibling,c=h(()=>{const a=f(n,r);(typeof a=="function"?a():a)?t.isConnected||s.insertBefore(t,i):t.isConnected&&s.removeChild(t)});o.push(c)}),()=>o.forEach(t=>t())}function W(e,n){const o=[],t=D(e,n);t&&o.push(t);const r=C(e,n);return r&&o.push(r),()=>o.forEach(s=>s())}function Y(e,n){const o=[];return e.querySelectorAll("[data-for]").forEach(t=>{const r=t.querySelector("template");if(!r)return;const s=t.dataset.for;if(!s)return;let i=[];const c=h(()=>{const a=f(n,s),u=typeof a=="function"?a():a||[];i.forEach(p=>p()),i=[],Array.from(t.childNodes).forEach(p=>{p!==r&&p.remove()}),u.forEach((p,w)=>{const d=r.content.cloneNode(!0),g=Array.from(d.children),k={...n,$item:p,$index:w};g.forEach(K=>{const Q=W(K,k);i.push(Q)}),t.appendChild(d)})});o.push(()=>{c(),i.forEach(a=>a()),i=[]})}),()=>o.forEach(t=>t())}function j(e,n){if(e.type==="checkbox"){Array.isArray(n)?e.checked=n.includes(e.value):e.checked=!!n;return}if(e.type==="radio"){e.checked=n===e.value;return}e.value=n??""}function B(e,n){return e.type==="checkbox"?Array.isArray(n())?e.checked?[...n(),e.value]:n().filter(o=>o!==e.value):e.checked:e.type==="radio"?e.checked?e.value:n():e.value}function z(e,n){const o=[];return e.querySelectorAll("[data-model]").forEach(t=>{const r=t.dataset.model;if(!r)return;const s=f(n,r),i=f(n,"set"+$(r));if(typeof s!="function"||typeof i!="function")throw new Error(`[model] "${r}" requires signal "${r}()" and setter "set${$(r)}()"`);const c=h(()=>{j(t,s())}),a=u=>{i(B(t,s))};A(t,"input",a),A(t,"change",a),o.push(()=>{c(),S(t,"input"),S(t,"change")})}),()=>o.forEach(t=>t())}function G(e,n){const t=(e.querySelector("[data-init]")||e).dataset.init;if(t){if(t){const r=f(n,t);if(typeof r=="function")r();else throw new Error(`[init] ${t} must be a function`)}return null}}function T(e,n){const o=[];return e.querySelectorAll("[data-bind]").forEach(t=>{const r=t.dataset.bind;if(!r||!r.includes(":"))return;const[s,i]=t.dataset.bind.split(":").map(u=>u.trim()),c=f(n,i);if(typeof c!="function")throw new Error(`[bind] ${i} is not a signal`);const a=h(()=>{const u=c();u==null?t.removeAttribute(s):u===!0?t.setAttribute(s,""):u===!1?t.removeAttribute(s):t.setAttribute(s,u)});o.push(a)}),()=>o.forEach(t=>t())}function U(e,n){const o=[];return e.querySelectorAll("[data-show]").forEach(t=>{t.hasAttribute("data-init-hide")&&(t.removeAttribute("data-init-hide"),t.style.display="none");const r=t.dataset.show;if(!r)return;const s=t.hasAttribute("data-animate"),i=t.dataset.animate||"opacity 0.5s ease, transform 0.5s ease",c=h(()=>{const a=f(n,r);if(typeof a!="function")throw new Error(`[show] ${r} must be a function`);s?a()?(t.style.display="",t.style.opacity="0",t.style.transform="translateY(-10px)",requestAnimationFrame(()=>{t.style.opacity="1",t.style.transform="translateY(0)"})):(t.style.opacity="0",t.style.transform="translateY(-10px)",t.style.transition=i,A(t,"transitionend",()=>{a()||(t.style.display="none")})):a()?t.style.display="":t.style.display="none"});o.push(c)}),()=>o.forEach(t=>t())}const H=[D,C,P,Y,z,G,T,U],b=new WeakMap;function M(){document.querySelectorAll("[data-scope]").forEach(e=>{const n=L[e.dataset.scope];if(!n)throw new Error(`Scope ${e.dataset.scope} is not defined`);const o=b.get(e);o&&o.forEach(r=>r());const t=[];H.forEach(r=>{try{const s=r(e,n);typeof s=="function"&&t.push(s)}catch(s){console.error(`[Directive error] ${r.name}`,s,e)}}),b.set(e,t)})}function J(e){const n=b.get(e);n&&(n.forEach(o=>o()),b.delete(e))}return typeof document<"u"&&document.addEventListener("DOMContentLoaded",M),l.defineScope=V,l.defineStore=x,l.effect=h,l.mount=M,l.signal=N,l.unmount=J,l})({});
