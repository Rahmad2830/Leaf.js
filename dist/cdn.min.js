(function(){"use strict";let u=null;function l(e){e.deps&&(e.deps.forEach(n=>{n.delete(e)}),e.deps.clear())}function p(e){const n=()=>{l(n),u=n,e(),u=null};return n.deps=new Set,n(),()=>l(n)}function S(e){let n=e;const t=new Set;return[()=>(u&&(t.add(u),u.deps.add(t)),n),a=>{n=a,new Set(t).forEach(r=>r())}]}const h={};function L(e,n){h[e]=n()}function i(e,n){const t=n.split(".");let o=e;for(const c of t)if(o=o[c],o===void 0)return;return o}function m(e){return e.charAt(0).toUpperCase()+e.slice(1)}const d=new WeakMap;function y(e,n){let t=d.get(e);if(!t)return;const o=t[n];o&&(e.removeEventListener(n,o),delete t[n],Object.keys(t).length===0&&d.delete(e))}function A(e,n){const t=[];return e.querySelectorAll("[data-text]").forEach(o=>{const c=o.dataset.text,a=i(n,c),s=p(()=>{o.textContent=typeof a=="function"?a():a});t.push(s)}),()=>t.forEach(o=>o())}function v(){document.querySelectorAll("[data-scope]").forEach(e=>{const n=h[e.dataset.scope];e.querySelectorAll("[data-text]").forEach(t=>{const o=t.dataset.text,c=i(n,o);p(()=>{t.textContent=c()})}),e.querySelectorAll("[data-on]").forEach(t=>{const o=t.dataset.on.split(":"),c=o[0],a=()=>{const r=i(n,o[1]);typeof r=="function"&&r()};let s=d.get(t);s||(s={},d.set(t,s)),y(t,c),t.addEventListener(c,a),s[c]=a}),e.querySelectorAll("[data-if]").forEach(t=>{const o=t.dataset.if,c=i(n,o);p(()=>{c()?t.style.display="":t.style.display="none"})}),e.querySelectorAll("[data-for]").forEach(t=>{const o=t.querySelector("template"),c=t.dataset.for;let a=[];p(()=>{const s=i(n,c)();a.forEach(r=>r()),a=[],Array.from(t.childNodes).forEach(r=>{r!==o&&r.remove()}),s.forEach((r,f)=>{const w=o.content.cloneNode(!0),g={...n,$item:r,$index:f},q=A(w,g);a.push(q),t.appendChild(w)})})}),e.querySelectorAll("[data-model]").forEach(t=>{const o=t.dataset.model,c=i(n,o),a=i(n,"set"+m(o));p(()=>{const f=c();t.value!==f&&(t.value=f??"")});let s=d.get(t);s||(s={},d.set(t,s));const r=f=>{typeof a=="function"&&a(f.target.value)};y(t,"input"),t.addEventListener("input",r),s.input=r})})}typeof document<"u"&&document.addEventListener("DOMContentLoaded",v),typeof window<"u"&&(window.signal=S,window.defineScope=L,window.mount=v)})();
